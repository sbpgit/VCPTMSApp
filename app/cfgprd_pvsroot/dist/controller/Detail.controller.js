sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","cfgapp/pvsroot/cfgprdpvsroot/controller/BaseController"],function(e,t,i){"use strict";var o,s;return i.extend("cfgapp.pvsroot.cfgprdpvsroot.controller.Detail",{onInit:function(){this.bus=sap.ui.getCore().getEventBus();this.bus.subscribe("cfgapp.pvsroot.cfgprdpvsroot","addBeginPage",this.addBeginPage,this);this.bus.subscribe("cfgapp.pvsroot.cfgprdpvsroot","addDetailPage",this.addDetailPage,this);this.bus.subscribe("nav","toBeginPage",this.toBeginPage,this);this.bus.subscribe("nav","toDetailPage",this.toDetailPage,this);this.bus.subscribe("nav","backToBegin",this.backToBegin,this);this.bus.subscribe("nav","expandBegin",this.expandBegin,this);this.oFlexibleColumnLayout=this.byId("fcl");this.getRouter().getRoute("Detail").attachPatternMatched(this._onPatternMatched,this);this.oFlexibleColumnLayout.setLayout(sap.f.LayoutType.TwoColumnsMidExpanded)},onExit:function(){this.bus.unsubscribe("cfgapp.pvsroot.cfgprdpvsroot","addBeginPage",this.addBeginPage,this);this.bus.unsubscribe("cfgapp.pvsroot.cfgprdpvsroot","addDetailPage",this.addDetailPage,this);this.bus.unsubscribe("nav","toBeginPage",this.toBeginPage,this);this.bus.unsubscribe("nav","toDetailPage",this.toDetailPage,this);this.bus.unsubscribe("nav","backToBegin",this.backToBegin,this)},onNavBack:function(){this.getRouter().navTo("Home",{},true);this.getModel("oGModel").setProperty("/currentNode","")},addBeginPage:function(e,t,i){this.oFlexibleColumnLayout.addBeginColumnPage(i)},addDetailPage:function(e,t,i){var o=this.oFlexibleColumnLayout.getMidColumnPages(),s=false;for(var a=0;a<o.length;a++){if(o[a].getProperty("viewName")===i.getViewName()){s=true;break}else{s=false}}if(!s){this.oFlexibleColumnLayout.addMidColumnPage(i)}},toBeginPage:function(e,t,i){var o=this.oFlexibleColumnLayout.getBeginColumnPages();for(var s=0;s<o.length;s++){if(o[s].getProperty("viewName")===i.viewName){this.oFlexibleColumnLayout.toBeginColumnPage(this.oFlexibleColumnLayout.getBeginColumnPages()[s])}}},toDetailPage:function(e,t,i){var o=this.oFlexibleColumnLayout.getMidColumnPages();for(var s=0;s<o.length;s++){if(o[s].getProperty("viewName")===i.viewName){this.oFlexibleColumnLayout.toMidColumnPage(this.oFlexibleColumnLayout.getMidColumnPages()[s]);break}}this.oFlexibleColumnLayout.setLayout(sap.f.LayoutType.TwoColumnsMidExpanded);if(o.length<1){this.getOwnerComponent().runAsOwner(function(){this.detailView=sap.ui.view({viewName:"cfgapp.pvsroot.cfgprdpvsroot.view.NodeDetail",type:"XML"});this.oFlexibleColumnLayout.addMidColumnPage(this.detailView)}.bind(this))}else{this.oFlexibleColumnLayout.addMidColumnPage(o[0]);o[0].onAfterRendering()}},backToBegin:function(){this.oFlexibleColumnLayout.setLayout(sap.f.LayoutType.OneColumn)},_onPatternMatched:function(){if(!this.getModel("oGModel").getProperty("/PARENT_NODE")){this.getRouter().navTo("Home",{},true)}else{this.oFlexibleColumnLayout.setLayout(sap.f.LayoutType.OneColumn);var e=this.oFlexibleColumnLayout.getBeginColumnPages();if(e.length<1){this.getOwnerComponent().runAsOwner(function(){this.masterView=sap.ui.view({viewName:"cfgapp.pvsroot.cfgprdpvsroot.view.NodeMaster",type:"XML"});this.oFlexibleColumnLayout.addBeginColumnPage(this.masterView)}.bind(this))}else{this.oFlexibleColumnLayout.toBeginColumnPage(e[0]);e[0].onAfterRendering()}}},expandBegin:function(){this.bus.publish("nav","backToBegin");if(!Device.system.desktop){this.byId("leftMenu").setVisible(false);this.getModel("appView").setProperty("/expanded",true)}}})});