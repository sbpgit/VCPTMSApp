sap.ui.define(["cfgapp/pvsroot/cfgprdpvsroot/controller/BaseController","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,i,s){"use strict";var r,n,a;return e.extend("cfgapp.pvsroot.cfgprdpvsroot.controller.NodeDetail",{onInit:function(){r=this;this.oListModel=new o;this.bus=sap.ui.getCore().getEventBus()},onDetailNavBack:function(){this.bus.publish("nav","backToBegin")},onAfterRendering:function(){n=this.getModel("oGModel");this.i18n=this.getResourceBundle();this.oList=this.byId("idListDetail");this.oList.setModel(r.oListModel);this.oList.removeSelections();if(this.oList.getBinding("items")){this.oList.getBinding("items").filter([])}r.getData()},getData:function(){r=this;var e=this.getModel("sModel");a=n.getProperty("/PARENT_NODE");e.callFunction("/fGetNodeDet",{method:"GET",urlParameters:{NODE_TYPE:"SN",CHILD_NODE:"1",PARENT_NODE:a},success:function(e){r.oListModel.setData({results:e.results})},error:function(e){t.show(r.i18n.getText("getListErr"))}})},onSearch:function(e){r.setCurrentSelectedItem();var t=e.getParameter("newValue")||e.getParameter("query"),o=r.oList.getBinding("items"),n=[];if(t&&t.trim()!==""){t=t.trim();n.push(new i({filters:[new i("CHILD_NODE",s.Contains,t),new i("NODE_DESC",s.Contains,t)],and:false}))}if(o){o.filter(n)}},setCurrentSelectedItem:function(){var e=this.byId("viewNodeList").getSelectedItem();if(e){r.getModel("oGModel").setProperty("/currentNode",e)}},onCreate:function(){if(!r._oCreateNode){r._oCreateNode=sap.ui.xmlfragment("cfgapp.pvsroot.cfgprdpvsroot.view.CreateNode",r);r.getView().addDependent(r._oCreateNode)}r._oCreateNode.open();sap.ui.getCore().byId("idCrDg").setTitle("Create Structure Node");var e="View Node : "+a;sap.ui.getCore().byId("idText").setText(e);sap.ui.getCore().byId("idText").setVisible(true)},onSave:function(){r._oCreateNode.close();sap.ui.getCore().byId("idText").setVisible(false);sap.ui.getCore().byId("idCrDg").setTitle("");r._oCreateNode.destroy(true);r._oCreateNode=""},onCancel:function(){r._oCreateNode.close();sap.ui.getCore().byId("idText").setVisible(false);sap.ui.getCore().byId("idCrDg").setTitle("");r._oCreateNode.destroy(true);r._oCreateNode=""}})});