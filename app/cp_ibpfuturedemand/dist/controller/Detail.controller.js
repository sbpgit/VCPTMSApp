sap.ui.define(["cp/appf/cpibpfuturedemand/controller/BaseController","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/core/Fragment"],function(e,o,t,a,r,n,i,s){"use strict";var l,d;return e.extend("cp.appf.cpibpfuturedemand.controller.Detail",{onInit:function(){l=this;l.oListModel=new a;l.oListModel.setSizeLimit(1e3)},onBack:function(){var e=sap.ui.core.UIComponent.getRouterFor(l);e.navTo("Home",{},true)},onAfterRendering:function(){l=this;l.oGModel=l.getModel("oGModel");l.byId("DetailSearch").setValue("");var e=l.oGModel.getProperty("/sLoc"),o=l.oGModel.getProperty("/sProd"),t=l.oGModel.getProperty("/sVer"),a=l.oGModel.getProperty("/sScen"),i=l.oGModel.getProperty("/sWeek");sap.ui.core.BusyIndicator.show();l.getModel("BModel").read("/getIBPFplan",{filters:[new r("LOCATION_ID",n.EQ,e),new r("PRODUCT_ID",n.EQ,o),new r("VERSION",n.EQ,t),new r("SCENARIO",n.EQ,a),new r("WEEK_DATE",n.EQ,i)],success:function(e){sap.ui.core.BusyIndicator.hide();l.oListModel.setData({results:e.results});l.byId("idPlanTable").setModel(l.oListModel);l.onDetailSearch()},error:function(e){sap.ui.core.BusyIndicator.hide();sap.m.MessageToast.show("Error While fetching data")}})},onDetailSearch:function(e){var o=[];if(e){var t=e.getParameter("value")||e.getParameter("newValue")}else{var t=l.byId("DetailSearch").getValue()}t=t?t.trim():"";if(t!==""){o.push(new r({filters:[new r("CLASS_NAME",n.Contains,t),new r("CHAR_NAME",n.Contains,t),new r("CHAR_VALUE",n.Contains,t)],and:false}))}l.byId("idPlanTable").getBinding("items").filter(o)}})});