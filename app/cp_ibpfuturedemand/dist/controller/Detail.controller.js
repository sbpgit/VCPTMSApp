sap.ui.define(["cp/appf/cpibpfuturedemand/controller/BaseController","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/core/Fragment"],function(e,o,t,r,s,a,n,i){"use strict";var d,l;return e.extend("cp.appf.cpibpfuturedemand.controller.Detail",{onInit:function(){d=this;d.oListModel=new r;d.oListModel.setSizeLimit(1e3)},onBack:function(){var e=sap.ui.core.UIComponent.getRouterFor(d);e.navTo("Home",{},true)},onAfterRendering:function(){d=this;d.oGModel=d.getModel("oGModel");d.byId("DetailSearch").setValue("");var e=d.oGModel.getProperty("/sLoc"),o=d.oGModel.getProperty("/sProd"),t=d.oGModel.getProperty("/sVer"),r=d.oGModel.getProperty("/sScen"),n=d.oGModel.getProperty("/sWeek");sap.ui.core.BusyIndicator.show();d.getModel("BModel").read("/getIBPFplan",{filters:[new s("LOCATION_ID",a.EQ,e),new s("PRODUCT_ID",a.EQ,o),new s("VERSION",a.EQ,t),new s("SCENARIO",a.EQ,r),new s("WEEK_DATE",a.EQ,n)],success:function(e){sap.ui.core.BusyIndicator.hide();d.oListModel.setData({results:e.results});d.byId("idPlanTable").setModel(d.oListModel)},error:function(e){sap.ui.core.BusyIndicator.hide();sap.m.MessageToast.show("Error While fetching data")}})},onDetailSearch:function(e){var o="",t=[];var o=d.byId("DetailSearch").getValue();o=o?o.trim():"";o=o.toUpperCase();var r=d.oGModel.getProperty("/sLoc"),n=d.oGModel.getProperty("/sProd"),i=d.oGModel.getProperty("/sVer"),l=d.oGModel.getProperty("/sScen"),u=d.oGModel.getProperty("/sWeek");t.push(new s({filters:[new s("LOCATION_ID",a.EQ,r),new s("PRODUCT_ID",a.EQ,n),new s("VERSION",a.EQ,i),new s("SCENARIO",a.EQ,l),new s("WEEK_DATE",a.EQ,u)],and:true}));if(o!==""){t.push(new s({filters:[new s("CLASS_NAME",a.Contains,o),new s("CHAR_NAME",a.Contains,o),new s("CHAR_VALUE",a.Contains,o)],and:false}))}sap.ui.core.BusyIndicator.show();d.getModel("BModel").read("/getIBPFplan",{filters:[t],success:function(e){sap.ui.core.BusyIndicator.hide();d.oListModel.setData({results:e.results});d.byId("idPlanTable").setModel(d.oListModel)},error:function(e){sap.ui.core.BusyIndicator.hide();sap.m.MessageToast.show("Error While fetching data")}})}})});