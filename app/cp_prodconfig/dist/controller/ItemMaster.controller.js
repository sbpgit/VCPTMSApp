sap.ui.define(["cp/appf/cpprodconfig/controller/BaseController","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox","sap/ui/Device"],function(e,t,o,i,s,r,a){"use strict";var n,l;return e.extend("cp.appf.cpprodconfig.controller.ItemMaster",{onInit:function(){n=this;n.oModel=new o;this.bus=sap.ui.getCore().getEventBus();this.bus.subscribe("data","refreshMaster",this.refreshMaster,this);this.bus.publish("nav","toBeginPage",{viewName:this.getView().getProperty("viewName")})},refreshMaster:function(){this.onAfterRendering()},onAfterRendering:function(){n=this;l=this.getModel("oGModel");this.getModel("BModel").read("/getProdClass",{success:function(e){n.oModel.setData({results:e.results});n.byId("prodList").setModel(n.oModel)},error:function(){t.show("Failed to get data")}})},onhandlePress:function(e){l=this.getModel("oGModel");if(e){var t=e.getSource().getSelectedItem().getBindingContext().getObject();l.setProperty("/classNo",t.CLASS_NUM);l.setProperty("/prodDesc",t.PROD_DESC);l.setProperty("/prodFam",t.PROD_FAMILY);l.setProperty("/prodGroup",t.PROD_GROUP);l.setProperty("/prodModel",t.PROD_MODEL);l.setProperty("/prodMidRng",t.PROD_MDLRANGE);l.setProperty("/prodSeries",t.PROD_SERIES)}else{}n.getOwnerComponent().runAsOwner(function(){if(!n.oDetailView){try{n.oDetailView=sap.ui.view({viewName:"cp.appf.cpprodconfig.view.ItemDetail",type:"XML"});n.bus.publish("flexible","addDetailPage",n.oDetailView);n.bus.publish("nav","toDetailPage",{viewName:n.oDetailView.getViewName()});n.oDetailView.onAfterRendering()}catch(e){n.oDetailView.onAfterRendering()}}else{n.bus.publish("nav","toDetailPage",{viewName:n.oDetailView.getViewName()});n.oDetailView.onAfterRendering()}})}})});