sap.ui.define(["cpapp/cpclassibp/controller/BaseController","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/Dialog","sap/m/Text","sap/m/Button"],function(e,s,t,a,o,i,n,r){"use strict";var l,d;return e.extend("cpapp.cpclassibp.controller.Home",{onInit:function(){l=this;l.oModel=new s;this.oModel.setSizeLimit(1e3)},onAfterRendering:function(){l=this;d=this.getModel("oGModel");sap.ui.core.BusyIndicator.show();this.getModel("BModel").read("/getClass ",{success:function(e){l.oModel.setData({results:e.results});l.byId("classList").setModel(l.oModel);sap.ui.core.BusyIndicator.hide()},error:function(){t.show("Failed to get data")}})},onClassUpdate:function(){var e={CLASSDATA:[]},s;var t=l.byId("classList").getItems();for(var a=0;a<t.length;a++){let o="";if(t[a].getCells()[4].getSelected()===true){o="X"}else{}s={CLASS_NUM:t[a].getCells()[0].getText(),IBPCHAR_CHK:o};e.CLASSDATA.push(s)}sap.ui.core.BusyIndicator.show();l.getModel("BModel").callFunction("/updateIBPClass",{method:"GET",urlParameters:{CLASSDATA:JSON.stringify(e.CLASSDATA)},success:function(e){sap.ui.core.BusyIndicator.hide();sap.m.MessageToast.show("Updated Successfully");l.onAfterRendering()},error:function(e){sap.ui.core.BusyIndicator.hide();sap.m.MessageToast.show("Update Failed")}})},handleSearch:function(e){var s=e.getParameter("value")||e.getParameter("newValue"),t=e.getParameter("id"),i=[];s=s?s.trim():"";if(s!==""){i.push(new a({filters:[new a("CLASS_NAME",o.Contains,s),new a("CLASS_DESC",o.Contains,s)],and:false}))}l.byId("classList").getBinding("items").filter(i)}})});