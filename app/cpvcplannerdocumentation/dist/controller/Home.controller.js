sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(e,t){"use strict";var o,r,n=0,d=0;return e.extend("cpapp.cpvcplannerdocumentation.controller.Home",{onInit:function(){o=this},onAfterRendering:function(){var e=[];var t=new sap.ui.model.json.JSONModel;var r=new sap.ui.model.json.JSONModel;o.oGModel=o.getOwnerComponent().getModel("oGModel");o.byId("idHTML").setContent();this.getView().getModel("oModel").read("/getPageHdr",{success:function(t){var r=t.results;for(var n=0;n<=r.length-1;n++){e.push({NodeID:r[n].PAGEID,HierarchyLevel:r[n].HEIRARCHYLEVEL,Description:r[n].DESCRIPTION,ParentNodeID:r[n].PARENTNODEID})}var d=e;var a={};for(var n=0;n<d.length;n++){var s="id"+d[n].NodeID;a[s]=d[n];a[s].__metadata=""}for(var n in a){a[n].children=[]}for(var n in a){var i="id"+a[n].ParentNodeID;if(a[i]){a[i].children.push(a[n])}}var l=[];for(var n in a){var i="id"+a[n].ParentNodeID;if(!a[i]){l.push(a[n])}}var g=new sap.ui.model.json.JSONModel;g.setData({items:l});var I=o.byId("nodes");I.setModel(g);I.expand(0)}});this.getView().getModel("oModel").read("/getPagePgrh",{success:function(e){var e=e.results;o.oGModel.setProperty("/Content",e);o.oGModel.setProperty("/flag","X");o.byId("idHTML").setContent(e[0].CONTENT);o.oGModel.setProperty("/initialData",e[0].CONTENT);o.byId("detailTitle").setText(e[0].DESCRIPTION);o.byId("nodes").getItems()[0].addStyleClass("red");o.oGModel.setProperty("/PAGEID",e[0].PAGEID)}})},onSelectionChange:function(e){o.byId("detailSearch").setValue();o.oGModel.setProperty("/flag","");o.byId("idHTML").setContent();var t=e.getSource().getBindingContext().getProperty().NodeID;o.oGModel.setProperty("/PAGEDES",e.getSource().getBindingContext().getProperty().Description);var r=o.byId("nodes").getItems();for(var d=0;d<=r.length-1;d++){if(t===r[d].getBindingContext().getObject().NodeID){o.oGModel.setProperty("/PAGEID",t);var a=o.byId("nodes").getItems();a[d].addStyleClass("red")}else{var a=o.byId("nodes").getItems();a[d].removeStyleClass("red")}}var s=o.oGModel.getProperty("/Content");for(var i=0;i<=s.length-1;i++){if(t===s[i].PAGEID){o.byId("idHTML").setContent(s[i].CONTENT);o.oGModel.setProperty("/oContent",s[i].CONTENT);o.byId("detailTitle").setText(s[i].DESCRIPTION);var l=o.byId("nodes").getItems();for(var g=0;n<=l.length-1;g++){if(s[i].PAGEID===l[g].getBindingContext().getProperty().NodeID){var I=o.byId("nodes");I.onItemExpanderPressed(I.getItems()[g],true);break}}}}},onMasterSearch:function(e){var t=e.getParameter("newValue");var r=new sap.ui.model.Filter("Description",sap.ui.model.FilterOperator.Contains,t);var n=this.byId("nodes").getBinding("items");this.byId("nodes").getBinding("items").filter(t?new sap.ui.model.Filter({path:"Description",operator:"Contains",value1:t}):null);if(t.length>1){n.expandToLevel(3)}else{var d=o.oGModel.getProperty("/PAGEID");var a=this.byId("nodes").getItems();for(var s=0;s<a.length;s++){if(d===a[s].getBindingContext().getObject().NodeID){a[s].addStyleClass("red")}else{a[s].removeStyleClass("red")}}}},onTreeChange:function(e){if(e.getParameters().reason==="filter"){const e=this.getOwnerComponent().getModel("oGModel");const t=e.getProperty("/query");this.byId("nodes").expandToLevel(t?99:0)}},myJsFunc:function(e){o.oGModel.setProperty("/flag","Y");o.byId("idHTML").setContent();var t=8;var r=5;var n=6;var d=o.byId("nodes");var a=o.byId("nodes").getItems();for(var s=0;s<a.length;s++){if(a[s].getBindingContext().getObject().NodeID===r){o.byId("nodes").onItemExpanderPressed(a[s],true);break}}var i=o.byId("nodes").getItems();for(var l=0;l<i.length;l++){if(i[l].getBindingContext().getObject().NodeID===n){o.byId("nodes").onItemExpanderPressed(i[l],true);break}}var g=o.byId("nodes").getItems();var I=o.oGModel.getProperty("/Content");for(var v=0;v<=g.length-1;v++){if(t===g[v].getBindingContext().getObject().NodeID){g[v].addStyleClass("red")}else{g[v].removeStyleClass("red")}}for(var y=0;y<=I.length-1;y++){if(t===I[y].PAGEID){o.byId("idHTML").setContent(I[y].CONTENT);o.oGModel.setProperty("/clickContent",I[y].CONTENT);o.byId("detailTitle").setText(I[y].DESCRIPTION)}}},ondetSearch:function(e){this.byId("idHTML").setContent();if(o.oGModel.getProperty("/flag")==="X"){var t=o.oGModel.getProperty("/initialData")}else if(o.oGModel.getProperty("/flag")==="Y"){var t=o.oGModel.getProperty("/clickContent")}else{var t=o.oGModel.getProperty("/oContent")}this.byId("idHTML").setContent(t);var r=o.byId("detailSearch").getValue();var n=this.byId("idHTML").getContent();if(r!==""){var d=new RegExp(r,"g");var a=n.replace(d,`<mark>${r}</mark>`);this.byId("idHTML").setContent();this.byId("idHTML").setContent(a)}},onCollapseBtn:function(){var e=o.byId("nodes");e.collapseAll();var t=o.byId("nodes").getItems();for(var r=0;r<=t.length-1;r++){t[r].removeStyleClass("red")}var n=o.oGModel.getProperty("/PAGEID");var d=o.byId("detailTitle").getText();if(t.length===6){for(var a=0;a<t.length;a++){if(d===t[a].getTitle()&&n===t[a].getBindingContext().getObject().NodeID){t[a].addStyleClass("red")}}}},onExpandBtn:function(){var e=o.byId("nodes");e.expandToLevel(999);var t=o.byId("nodes").getItems();var r=o.oGModel.getProperty("/PAGEID");for(var n=0;n<=t.length-1;n++){if(r===t[n].getBindingContext().getObject().NodeID){var d=o.byId("nodes").getItems();d[n].addStyleClass("red")}else{var d=o.byId("nodes").getItems();d[n].removeStyleClass("red")}}},onChange:function(e){var t=e.getParameters().expanded;var r=o.byId("nodes").getItems();var n=o.oGModel.getProperty("/PAGEID");for(var d=0;d<=r.length-1;d++){if(n===r[d].getBindingContext().getObject().NodeID){r[d].addStyleClass("red")}else{r[d].removeStyleClass("red")}}}})});