sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(e,t){"use strict";var o,n,r=0,d=0;return e.extend("cpapp.cpvcplannerdocumentation.controller.Home",{onInit:function(){o=this},onAfterRendering:function(){var e=[];var t=new sap.ui.model.json.JSONModel;var n=new sap.ui.model.json.JSONModel;o.oGModel=o.getOwnerComponent().getModel("oGModel");o.byId("idHTML").setContent();jQuery.ajax({type:"GET",contentType:"application/json",url:"model/headerContent.json",dataType:"json",async:false,success:function(t,n,r){for(var d=0;d<=t.length-1;d++){e.push({NodeID:t[d].PAGEID,HierarchyLevel:t[d].HEIRARCHYLEVEL,Description:t[d].DESCRIPTION,ParentNodeID:t[d].PARENTNODEID})}var a=e;var s={};for(var d=0;d<a.length;d++){var l="id"+a[d].NodeID;s[l]=a[d];s[l].__metadata=""}for(var d in s){s[d].children=[]}for(var d in s){var i="id"+s[d].ParentNodeID;if(s[i]){s[i].children.push(s[d])}}var g=[];for(var d in s){var i="id"+s[d].ParentNodeID;if(!s[i]){g.push(s[d])}}var I=new sap.ui.model.json.JSONModel;I.setData({items:g});var y=o.byId("nodes");y.setModel(I);y.expand(0)}});jQuery.ajax({type:"GET",contentType:"application/json",url:"model/contentdata.json",dataType:"json",async:false,success:function(e,t,n){o.oGModel.setProperty("/Content",e);o.oGModel.setProperty("/flag","X");o.byId("idHTML").setContent(e[0].CONTENT);o.oGModel.setProperty("/initialData",e[0].CONTENT);o.byId("detailTitle").setText(e[0].DESCRIPTION);o.byId("nodes").getItems()[0].addStyleClass("red");o.oGModel.setProperty("/PAGEID",e[0].PAGEID)}})},onSelectionChange:function(e){o.byId("detailSearch").setValue();o.oGModel.setProperty("/flag","");o.byId("idHTML").setContent();var t=e.getSource().getBindingContext().getProperty().NodeID;o.oGModel.setProperty("/PAGEDES",e.getSource().getBindingContext().getProperty().Description);var n=o.byId("nodes").getItems();for(var d=0;d<=n.length-1;d++){if(t===n[d].getBindingContext().getObject().NodeID){o.oGModel.setProperty("/PAGEID",t);var a=o.byId("nodes").getItems();a[d].addStyleClass("red")}else{var a=o.byId("nodes").getItems();a[d].removeStyleClass("red")}}var s=o.oGModel.getProperty("/Content");for(var l=0;l<=s.length-1;l++){if(t===s[l].PAGEID){o.byId("idHTML").setContent(s[l].CONTENT);o.oGModel.setProperty("/oContent",s[l].CONTENT);o.byId("detailTitle").setText(s[l].DESCRIPTION);var i=o.byId("nodes").getItems();for(var g=0;r<=i.length-1;g++){if(s[l].PAGEID===i[g].getBindingContext().getProperty().NodeID){var I=o.byId("nodes");I.onItemExpanderPressed(I.getItems()[g],true);break}}}}},onMasterSearch:function(e){var t=e.getParameter("newValue");var n=new sap.ui.model.Filter("Description",sap.ui.model.FilterOperator.Contains,t);var r=this.byId("nodes").getBinding("items");this.byId("nodes").getBinding("items").filter(t?new sap.ui.model.Filter({path:"Description",operator:"Contains",value1:t}):null);if(t.length>1){r.expandToLevel(3)}else{var d=o.oGModel.getProperty("/PAGEID");var a=this.byId("nodes").getItems();for(var s=0;s<a.length;s++){if(d===a[s].getBindingContext().getObject().NodeID){a[s].addStyleClass("red")}else{a[s].removeStyleClass("red")}}}},onTreeChange:function(e){if(e.getParameters().reason==="filter"){const e=this.getOwnerComponent().getModel("oGModel");const t=e.getProperty("/query");this.byId("nodes").expandToLevel(t?99:0)}},myJsFunc:function(e){o.oGModel.setProperty("/flag","Y");o.byId("idHTML").setContent();var t=8;var n=5;var r=6;var d=o.byId("nodes");var a=o.byId("nodes").getItems();for(var s=0;s<a.length;s++){if(a[s].getBindingContext().getObject().NodeID===n){o.byId("nodes").onItemExpanderPressed(a[s],true);break}}var l=o.byId("nodes").getItems();for(var i=0;i<l.length;i++){if(l[i].getBindingContext().getObject().NodeID===r){o.byId("nodes").onItemExpanderPressed(l[i],true);break}}var g=o.byId("nodes").getItems();var I=o.oGModel.getProperty("/Content");for(var y=0;y<=g.length-1;y++){if(t===g[y].getBindingContext().getObject().NodeID){g[y].addStyleClass("red")}else{g[y].removeStyleClass("red")}}for(var v=0;v<=I.length-1;v++){if(t===I[v].PAGEID){o.byId("idHTML").setContent(I[v].CONTENT);o.oGModel.setProperty("/clickContent",I[v].CONTENT);o.byId("detailTitle").setText(I[v].DESCRIPTION)}}},ondetSearch:function(e){this.byId("idHTML").setContent();if(o.oGModel.getProperty("/flag")==="X"){var t=o.oGModel.getProperty("/initialData")}else if(o.oGModel.getProperty("/flag")==="Y"){var t=o.oGModel.getProperty("/clickContent")}else{var t=o.oGModel.getProperty("/oContent")}this.byId("idHTML").setContent(t);var n=o.byId("detailSearch").getValue();var r=this.byId("idHTML").getContent();if(n!==""){var d=new RegExp(n,"g");var a=r.replace(d,`<mark>${n}</mark>`);this.byId("idHTML").setContent();this.byId("idHTML").setContent(a)}},onCollapseBtn:function(){var e=o.byId("nodes");e.collapseAll();var t=o.byId("nodes").getItems();for(var n=0;n<=t.length-1;n++){t[n].removeStyleClass("red")}var r=o.oGModel.getProperty("/PAGEID");var d=o.byId("detailTitle").getText();if(t.length===6){for(var a=0;a<t.length;a++){if(d===t[a].getTitle()&&r===t[a].getBindingContext().getObject().NodeID){t[a].addStyleClass("red")}}}},onExpandBtn:function(){var e=o.byId("nodes");e.expandToLevel(999);var t=o.byId("nodes").getItems();var n=o.oGModel.getProperty("/PAGEID");for(var r=0;r<=t.length-1;r++){if(n===t[r].getBindingContext().getObject().NodeID){var d=o.byId("nodes").getItems();d[r].addStyleClass("red")}else{var d=o.byId("nodes").getItems();d[r].removeStyleClass("red")}}},onChange:function(e){var t=e.getParameters().expanded;var n=o.byId("nodes").getItems();var r=o.oGModel.getProperty("/PAGEID");for(var d=0;d<=n.length-1;d++){if(r===n[d].getBindingContext().getObject().NodeID){n[d].addStyleClass("red")}else{n[d].removeStyleClass("red")}}}})});