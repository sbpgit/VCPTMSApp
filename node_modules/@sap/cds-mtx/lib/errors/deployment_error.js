module.exports = class DeploymentError extends Error {
    constructor(message, error) {
        super(message);
        this.name = 'DeploymentError';
        this.rootCause = error;
        if (error && error.stack) {
            this.stack += `\nCaused by: ${error.stack}`;
        }
        this.code = this.statusCode = 422;
    }

    toString() {
        if (this.rootCause) {
            return `${super.toString()}\nCaused by: ${this.rootCause.toString()}`;
        } else {
            return super.toString();
        }
    }
};
